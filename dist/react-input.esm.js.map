{"version":3,"file":"react-input.esm.js","sources":["../src/with-composition.tsx","../src/input.tsx","../src/textarea.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\nexport interface Props {\n  value?: string;\n  onChange: (x: string) => void;\n}\n\ntype InputType = 'input' | 'textarea';\n\nfunction withComposition<T extends Props>(\n  WrappedComponent: React.ComponentType<T> | InputType\n) {\n  const Inner: React.FC<T & Props> = props => {\n    const [composing, setComposing] = useState(false);\n    const [text, setText] = useState<string>(props.value || '');\n    const onComposition = (e: React.FormEvent<HTMLInputElement>) => {\n      const type = e.type;\n      const value = e.currentTarget.value;\n\n      if (type === 'compositionstart') {\n        setComposing(true);\n      } else if (type === 'compositionend') {\n        setComposing(false);\n        setText(value);\n        props.onChange(value);\n      }\n    };\n    const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n      setText(e.currentTarget.value);\n\n      if (!composing) {\n        props.onChange(e.currentTarget.value);\n      }\n    };\n\n    return React.createElement(\n      WrappedComponent,\n      Object.assign({}, props, {\n        value: text,\n        onChange: onChange,\n        onCompositionStart: onComposition,\n        onCompositionEnd: onComposition,\n      })\n    );\n  };\n\n  return Inner;\n}\n\nexport default withComposition;\n","import withComposition from './with-composition';\n\nconst Input = withComposition('input');\n\nexport default Input;\n","import withComposition from './with-composition';\n\nconst Textarea = withComposition('textarea');\n\nexport default Textarea;\n"],"names":["withComposition","WrappedComponent","Inner","props","useState","composing","setComposing","value","text","setText","onComposition","e","type","currentTarget","onChange","React","createElement","Object","assign","onCompositionStart","onCompositionEnd","Input","Textarea"],"mappings":";;AASA,SAASA,eAAT,CACEC,gBADF;AAGE,MAAMC,KAAK,GAAwB,SAA7BA,KAA6B,CAAAC,KAAK;oBACJC,QAAQ,CAAC,KAAD;QAAnCC;QAAWC;;qBACMF,QAAQ,CAASD,KAAK,CAACI,KAAN,IAAe,EAAxB;QAAzBC;QAAMC;;AACb,QAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD;AACpB,UAAMC,IAAI,GAAGD,CAAC,CAACC,IAAf;AACA,UAAML,KAAK,GAAGI,CAAC,CAACE,aAAF,CAAgBN,KAA9B;;AAEA,UAAIK,IAAI,KAAK,kBAAb,EAAiC;AAC/BN,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,OAFD,MAEO,IAAIM,IAAI,KAAK,gBAAb,EAA+B;AACpCN,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAG,QAAAA,OAAO,CAACF,KAAD,CAAP;AACAJ,QAAAA,KAAK,CAACW,QAAN,CAAeP,KAAf;AACD;AACF,KAXD;;AAYA,QAAMO,QAAQ,GAAG,SAAXA,QAAW,CAACH,CAAD;AACfF,MAAAA,OAAO,CAACE,CAAC,CAACE,aAAF,CAAgBN,KAAjB,CAAP;;AAEA,UAAI,CAACF,SAAL,EAAgB;AACdF,QAAAA,KAAK,CAACW,QAAN,CAAeH,CAAC,CAACE,aAAF,CAAgBN,KAA/B;AACD;AACF,KAND;;AAQA,WAAOQ,KAAK,CAACC,aAAN,CACLf,gBADK,EAELgB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBf,KAAlB,EAAyB;AACvBI,MAAAA,KAAK,EAAEC,IADgB;AAEvBM,MAAAA,QAAQ,EAAEA,QAFa;AAGvBK,MAAAA,kBAAkB,EAAET,aAHG;AAIvBU,MAAAA,gBAAgB,EAAEV;AAJK,KAAzB,CAFK,CAAP;AASD,GAhCD;;AAkCA,SAAOR,KAAP;AACD;;AC7CD,IAAMmB,KAAK;AAAA;AAAGrB,eAAe,CAAC,OAAD,CAA7B;;ACAA,IAAMsB,QAAQ;AAAA;AAAGtB,eAAe,CAAC,UAAD,CAAhC;;;;"}